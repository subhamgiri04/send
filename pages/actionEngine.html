<html>
	<head>
	    <title>Documentation - function/actionEngine.js</title>
			<link rel="stylesheet" href = "css/style.css">
	</head>
	<body>
		<a href = "index.html">back</a>
		<h1>actionEngine</h1>
		<ul>
			<li>
				<h4>processRequest(requestF, l={})</h4>
				<span class="pft">requestF</span> - requestModel/requestModel name (should be defined in global scope)
				<br>
				<span class="pft">l</span> - arguments
			</li>
		</ul>
		<h1>RequestModel Structure</h1>
		<ul>
			<li>
				<h3>Terminology/Glossary</h3>
				<table>
					<tr>
						<th>Term</th>
						<th>Description</th>
					</tr>
					<tr>
						<td>ActionRequest</td>
						<td>A JSON where we will be coding the logic. <br>A request can work like a method call, a method itself, or an if-block, or a loop, etc.</td>
					</tr>
					<tr>
						<td>FlowRequest</td>
						<td>An array of ActionRequest.</td>
					</tr>
				</table>
			</li>
			<li>
				<h3>RequestModel Schema</h3>
				<table>
					<tr>
						<th>JSON Property</th>
						<th>Datatype</th>
						<th>Description</th>
						<th>Default</th>
					</tr>
					<tr>
						<td colspan="4">
							<b>General</b>
						</td>
					</tr>

					<!-- <tr>
						<td>extends</td>
						<td>string</td>
						<td>It copies(inherits) all the properties of specified request.</td>
						<td></td>
					</tr>
					<tr>
						<td>delete</td>
						<td>JSON</td>
						<td>It deletes specified properties from the inherited request.</td>

						<td></td>
					</tr> -->
					<tr>
						<td>loop</td>
						<td>int(>=0) or whole numbers</td>
						<td>It repeats the request loop times.</td>
						<td>1</td>
					</tr>
					<tr>
						<td>condition</td>
						<td>string</td>
						<td>A boolean expression if false, will terminate the loop.</td>
						<td>true</td>
					</tr>
					<tr>
						<td>exit</td>
						<td>boolean</td>
						<td>If true, will exit the current FlowRequest. This property will only be read when the request gets successfully executed without breaking out of the loop.</td>
						<td>false</td>
					</tr>
					<tr>
						<td>declare</td>
						<td>JSON</td>
						<td>Declares variables inside the current request, this will be done inside the loop.</td>
						<td>{}</td>
					</tr>
					<tr>
						<td colspan="4">
							<b>Method Call</b>
						</td>
					</tr>
					<tr>
						<td>method</td>
						<td>string</td>
						<td>The name of the method as string</td>
						<td></td>
					</tr>
					<tr>
						<td>objectModel</td>
						<td>string</td>
						<td>Class/scope of the above method as string</td>
						<td></td>
					</tr>
					<tr>
						<td>arguments</td>
						<td>string/array</td>
						<td>Arguments to the above method</td>
						<td>[]</td>
					</tr>
					<tr>
						<td>response</td>
						<td>string</td>
						<td>The result of the method call will be stored in this variable locally(i.e., in this request).</td>
						<td></td>
					</tr>

					<tr>
						<td colspan="4">
							<b>Uncategorized</b>
						</td>
					</tr>
					<tr>
						<td>callback</td>
						<td>RequestModel</td>
						<td>Next Request( All variables in the parent request will be accessible by callback. )</td>
						<td></td>
					</tr>
					<tr>
						<td>passStates</td>
						<td>boolean</td>
						<td>If true will pass all the variables to the parent otherwise not.</td>
						<td>true</td>
					</tr>
					<tr>
						<td>return</td>
						<td>any</td>
						<td>It can be an expression or a property of a local variable.</td>
						<td></td>
					</tr>
				</table>
			</li>
			<li>
				<h3>
					Request Evalutation
				</h3>
				<pre>
Loop {
	condition {
		declare
		method{
			arguments
			objectModel
			method
			response

		}
		callback
	}
}
passStates
exit
return			</pre>
			</li>
			<li>
				<h3>Things To Remember</h3>
				<ol>
					<!-- <li>A request cannot extend itself or any ancestor request(Or anything that makes an infinite loop). </li>
					<li>A request cannot extend a flow request.</li>
					<li>A request cannot extend a child request of any request.</li> -->
					<li>For using local variables in the request, you should add a <span class="pft">l.</span> (el dot) prefix to each variable.</li>
					<li>
						For making an expression with global and local variables add a prefix <span class="pft">$</span> to the expression and pass it as a string.<br/>
						Some valid examples are ->
						<ul>
							<li><span class="pft">"$($l.x) ? (l.y + l.z) : (l.a)"</span></li>
							<li><span class="pft">"$(l.y + l.z + a)"</span>, a is global variable.</li>
						</ul>
					</li>
					<li>
						By default, the local variables will be accessible throughout the request once declared, but we can make a variable scoped with passStates:false
					</li>
					<li>
						Calling another request in a request.
						<pre>
<div class="type">Request</div>
var req = {
	declare: {
		args: {x: 'specific', y:'set', z:'of', a:'variables']
	},
	objectModel: 'engine',
	method: 'processRequest',
	arguments: { 'requestName', '$l.args'}
}

						</pre>
					</li>
				</ol>
			</li>
			<li>
				<h3>Method call</h3>
				<ol>
					<li>
						<pre>
<div class = "type">JS</div>
var elem = document.getElementById("hello");
						</pre>
						<pre>
<div class = "type">REQUEST</div>
var getElem = {
	objectModel : 'document',
	method: 'getElementById',
	arguments : 'hello',
	response: 'elem'
};
						</pre>
					</li>
					<li>
						<pre>
<div class = "type">JS</div>
var elem = document.createElement("div");
document.body.appendChild(elem);
elem.innerHTML = "Helloworld";
						</pre>
						<pre>
<div class = "type">REQUEST</div>
var createElem = {
	objectModel : 'document',
	method: 'createElement',
	arguments : 'div',
	response: 'elem',
	callback: {
		objectModel:'document.body',
		method:'appendChild',
		arguments:'$l.elem',
		callback: {
			declare:{
				'elem':{
					'innerHTML':'Helloworld'
				}
			}
		}
	}
};
						</pre>
					</li>
				</ol>
			</li>
			<!-- <li>
				<h3>Request.extends</h3>
				<ol>
					<li>
						<div class="desc">The below <span class="pft">child</span> request extends <span class="pft">req</span>(copies all the properties of req)</div>
						<pre>
<div class = "type">REQUEST</div>
var req = {
	declare: { x:5 },
	return: '$l.x + 2'
};
var child = {
	extends: 'req',
	return: '$l.x + 9' //updating return property inherited from previous request
}
						</pre>
					</li>
				</ol>

			</li>
			<li>
				<h3>Request.delete</h3>
				<ol>
					<li>
						<div class="desc">The below <span class="pft">child</span> request extends the declare property and then deletes <span class="pft">x</span> from <span class="pft">declare</span></div>
						<pre>
<div class = "type">REQUEST</div>
var req = {
	declare: { x:5, y:6 },
};
var child = {
	extends: 'req',
	delete: {
		declare: {
			x:1
		}
	}
}
						</pre>
					</li>
				</ol>
			</li> -->
			<li>
				<h3>Request.loop</h3>
				<ol>
					<li>
						<div class="desc"><span class="pft">req</span> will print <span class="pft">Helloword</span> 5 times on the console.</div>
						<pre>
<div class = "type">REQUEST</div>
var req = {
	objectModel: 'console',
	method: 'log',
	arguments:'Helloworld',
	loop:5
};

						</pre>
					</li>
				</ol>
			</li>
			<li>
				<h3>Request.condition</h3>
				<ol>
					<li>
						<div class="desc"><span class="pft">reqTrue</span> will print <span class="pft">x</span> whereas <span class='pft'>reqFalse</span> will not print anything.</div>
						<pre>
<div class = "type">REQUEST</div>
var reqTrue = {
	declare: { x:5 },
	callback: {
		condition: '$l.x > 3',
		objectModel: 'console',
		method: 'log',
		arguments: '$l.x'
	}
};
var reqFalse = {
	declare: { x:5 },
	callback: {
		condition: '$l.x < 3',
		objectModel: 'console',
		method: 'log',
		arguments: '$l.x'
	}
};
						</pre>
					</li>
				</ol>
			</li>
		</ul>
	</body>
</html>
